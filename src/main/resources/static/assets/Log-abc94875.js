import{a as s}from"./api-9de8bbcf.js";import{_ as i,r as n,o as l,c as g,w as c,g as h,t as d}from"./index-ba8ae7a7.js";const m={getLogList(e){return s.get("/logs",e)},getLog(e){return s.get("/logs/${id}")}},p={name:"Log",data(){return{headers:[{title:"ID",align:"center",value:"id",sortable:!0},{title:"操作人",align:"center",value:"user.username",sortable:!0},{title:"行为",align:"center",value:"action",sortable:!1},{title:"详情",align:"center",value:"description",sortable:!1},{title:"操作时间",align:"center",value:"createdAt",sortable:!0}],desserts:[],loading:!0,search:"",itemsPerPage:25,currentPage:1,totalItems:0}},mounted(){this.fetchLog()},methods:{fetchLog(){this.loading=!0,m.getLogList({params:{page:this.currentPage-1,size:this.itemsPerPage}}).then(e=>{this.desserts=e.data.content,this.totalItems=e.data.totalElements,this.loading=!1}).catch(e=>{console.error(e),this.loading=!1})},handleItemsPerPage(e){this.itemsPerPage=e,this.fetchLog()},handlePage(e){this.currentPage=e,this.fetchLog()},formatDate(e){}}};function u(e,P,f,_,t,a){const r=n("v-data-table-server");return l(),g(r,{headers:t.headers,items:t.desserts,"items-per-page":t.itemsPerPage,loading:t.loading,search:t.search,"items-length":t.totalItems,"items-per-page-text":"每页显示条数",class:"elevation-1",height:"90vh","item-value":"id","onUpdate:itemsPerPage":a.handleItemsPerPage,"onUpdate:page":a.handlePage},{"column.name":c(({column:o})=>[h(d(o.title.toUpperCase()),1)]),_:1},8,["headers","items","items-per-page","loading","search","items-length","onUpdate:itemsPerPage","onUpdate:page"])}const b=i(p,[["render",u]]);export{b as default};
